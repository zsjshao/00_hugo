## 运算符分类

C语言提供了13种类型的运算符，如下：

算术运算符(+-*/%)

关系运算符（> < == >= <= ! =)

逻辑运算符（！ &&  ||）

位运算符 (<<  >>  ~  |  ^  & )

赋值运算符 （=及其扩展赋值运算符）

条件运算符(? :)

逗号运算符（  ,  ）

指针运算符  ( *和& )

求字节数运算符（sizeof）

强制类型转换运算符（ (类型)）

分量运算符（.  -> ）

下标运算符 ( [  ] )

其他 （ 如函数调用运算符()）

### C语言运算符优先级

| 优先级 | 运算符 | 名称或含义     | 使用形式                 | 结合方向 | 说明       |
| ------ | ------ | -------------- | ------------------------ | -------- | ---------- |
| 1      | []     | 数组下标       | 数组名[常量表达式]       | 左到右   | --         |
| 1      | ()     | 圆括号         | (表达式)/函数名(形参表)  | 左到右   | --         |
| 1      | .      | 成员选择(对象) | 对象.成员名              | 左到右   | --         |
| 1      | ->     | 成员选择(指针) | 对象指针->成员名         | 左到右   | --         |
| 2      | -      | 负号运算符     | -表达式                  | 右到左   | 单目运算符 |
| 2      | ~      | 按位取反运算符 | ~表达式                  | 右到左   | 单目运算符 |
| 2      | ++     | 自增运算符     | ++变量名/变量名++        | 右到左   | 单目运算符 |
| 2      | --     | 自减运算符     | --变量名/变量名--        | 右到左   | 单目运算符 |
| 2      | *      | 取值运算符     | *指针变量                | 右到左   | 单目运算符 |
| 2      | &      | 取地址运算符   | &变量名                  | 右到左   | 单目运算符 |
| 2      | ！     | 逻辑非运算符   | ！表达式                 | 右到左   | 单目运算符 |
| 2      | (类型) | 强制类型转换   | （数据类型)表达式        | 右到左   | --         |
| 2      | sizeof | 长度运算符     | sizeof(表达式)           | 右到左   | --         |
| 3      | /      | 除             | 表达式/表达式            | 左到右   | 双目运算符 |
| 3      | *      | 乘             | 表达式*表达式            | 左到右   | 双目运算符 |
| 3      | %      | 余数（取模）   | 整型表达式%整型表达式    | 左到右   | 双目运算符 |
| 4      | +      | 加             | 表达式+表达式            | 左到右   | 双目运算符 |
| 4      | -      | 减             | 表达式-表达式            | 左到右   | 双目运算符 |
| 5      | <<     | 左移           | 变量<<表达式             | 左到右   | 双目运算符 |
| 5      | >>     | 右移           | 变量>>表达式             | 左到右   | 双目运算符 |
| 6      | >      | 大于           | 表达式>表达式            | 左到右   | 双目运算符 |
| 6      | >=     | 大于等于       | 表达式>=表达式           | 左到右   | 双目运算符 |
| 6      | <      | 小于           | 表达式<表达式            | 左到右   | 双目运算符 |
| 6      | <=     | 小于等于       | 表达式<=表达式           | 左到右   | 双目运算符 |
| 7      | ==     | 等于           | 表达式==表达式           | 左到右   | 双目运算符 |
| 7      | !=     | 不等于         | 表达式!=表达式           | 左到右   | 双目运算符 |
| 8      | &      | 按位与         | 表达式&表达式            | 左到右   | 双目运算符 |
| 9      | ^      | 按位异或       | 表达式^表达式            | 左到右   | 双目运算符 |
| 10     | \|     | 按位或         | 表达式\|表达式           | 左到右   | 双目运算符 |
| 11     | &&     | 逻辑与         | 表达式&&表达式           | 左到右   | 双目运算符 |
| 12     | \|\|   | 逻辑或         | 表达式\|\|表达式         | 左到右   | 双目运算符 |
| 13     | ?:     | 条件运算符     | 表达式1？表达式2:表达式3 |          | 三目运算符 |
| 14     | =      | 赋值运算符     | 变量=表达式              | 右到左   | --         |
| 14     | /=     | 除后赋值       | 变量/=表达式             | 右到左   | --         |
| 14     | *=     | 乘后赋值       | 变量*=表达式             | 右到左   | --         |
| 14     | %=     | 取模后赋值     | 变量%=表达式             | 右到左   | --         |
| 14     | +=     | 加后赋值       | 变量+=表达式             | 右到左   | --         |
| 14     | -=     | 减后赋值       | 变量-=表达式             | 右到左   | --         |
| 14     | <<=    | 左移后赋值     | 变量<<=表达式            | 右到左   | --         |
| 14     | >>=    | 右移后赋值     | 变量>>=表达式            | 右到左   | --         |
| 14     | &=     | 按位与后赋值   | 变量&=表达式             | 右到左   | --         |
| 14     | ^=     | 按位异或后赋值 | 变量^=表达式             | 右到左   | --         |
| 14     | \|=    | 按位或后赋值   | 变量\|=表达式            | 右到左   | --         |
| 15     | ,      | 逗号运算符     | 表达式,表达式，...       | 左到右   | --         |

### 关系运算符与关系表达式

关系运算符（>  <  ==  >=  <=  != )六个运算符，有关系运算符组成的表达式，称为关系表达式。C语言没有布尔类型，在C语言中，0值代表假，非0即为真。**关系运算符的优先级低于算术运算符。**

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int a=1,b=2;
  a>b&&printf("a > b\n")||printf("a < b\n");
}
```

### 逻辑运算符与逻辑表达式

逻辑运算符（!   &&  ||）依次为逻辑非，逻辑与，逻辑或。**逻辑非的优先级高于算术运算符，逻辑与和逻辑或的优先级低于关系运算符。**

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int year;
  while(scanf("%d",&year)!=EOF)
    if(year%4==0&&year%100!=0||year%400==0)
    {
      printf("%d is leap year\n",year);
    }else{
      printf("%d is not leap year\n",year);
    }
}
```

短路运算

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  i=1;
  i==0&&printf("system is error\n");
  i==0||printf("system is ok\n");
}
```

### 位运算符

位运算符（<<  >>  ~  |  ^  & ）包含左移，右移，按位取反，按位或，按位异或，按位与。

#### 移位运算

```
#include <stdio.h>
#include <stdlib.h>

//左移，高位丢弃，低位补0,乘2
//右移，正数 低位丢弃，高位补0，负数 低位丢弃，高位补1，除2 负奇数减1除2
int main()
{
  short i=0x7f89;
  short j=8;
  printf("before << i=%d\n",i);
  i=i<<1;
  printf("i=%d\n",i);
  j=j>>1;
  printf("j=%d\n",j);
}

[root@ali C]# ./a.out 
before << i=32649
i=-238
```

#### 异或

- 与0异或，得自身
- 自身异或，得0

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int result=0,i=0;
  int a[5]={1,2,3,2,1};
  for(i=0;i<5;i++)
  {
    result^=a[i];
  }
  printf("result=%d\n",result);
}

[root@ali C]# ./a.out 
result=3
```

#### 按位与、或、非

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int i=5,j=7;
  printf("i&j=%d\n",i&j);
  printf("i|j=%d\n",i|j);
  printf("~i=%d\n",~i);
}

[root@ali C]# ./a.out 
i&j=5
i|j=7
~i=-6
```

### 条件运算符

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int i,j,k,max2,max3;
  while(scanf("%d%d%d",&i,&j,&k)!=EOF)
  {
    max2=i>j?i:j;
    max3=(i>j?i:j)>k?(i>j?i:j):k;
    printf("max2=%d\n",max2);
    printf("max3=%d\n",max3);
  }
}

[root@ali C]# ./a.out 
2 1 4
max2=2
max3=4
4 1 2 
max2=4
max3=4
```

### 逗号表达式

逗号表达式的返回值为最后一个表达式的返回值，注意优先级

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int i,ret;
  i=5;
  ret=i,i+5;
  printf("ret=%d\n",ret);
  ret=(i,i+5);
  printf("ret=%d\n",ret);
}

[root@ali C]# ./a.out 
ret=5
ret=10
```

### 自增自减运算符

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int i=-1;
  int j;
  j=i++>-1; //j=i>-1;i=i+1;
  printf("i=%d,j=%d\n",i,j);
  j=!++i;
  printf("i=%d,j=%d\n",i,j);
}

[root@ali C]# ./a.out 
i=0,j=0
i=1,j=0
```

