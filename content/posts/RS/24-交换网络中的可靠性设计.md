+++
author = "zsjshao"
title = "24_交换网络中的可靠性设计"
date = "2020-05-23"
tags = ["NP"]
categories = ["RS"]

+++

## 1、交换网络可靠性总述

什么是可靠性？

- 网络可靠性是指网络自身在规定条件下正常工作的能力。人为攻击或自然破坏造成的网络不稳定性属于网络安全问题。
- 可用性用来衡量网络系统提供持续服务的能力。它表示在给定时间内，网络系统在特定环境中能满意工作的概率。

如何实现网络可靠性？

- 冗余设计是网络可靠性设计最常用的方法，网络冗余设计的目的有两个，一是提供网络链路备份，二是提供网络设备冗余负载。
- 通过网络协议以及设备增强特性增加网络可靠性

锐捷园区网常用可靠性技术

- 本章节我们聚焦MSTP+VRRP组合方案、DLDP、BFD三个方案类型

![01_reliability](http://images.zsjshao.cn/images/rs/24-reliability/01_reliability.png)



## 2、MSTP+VRRP组合应用

场景1描述

- 接入层交换机上有4个用户vlan，vlan 1，2，3，4
- 左边的S5750-1是主网关，右边的S5750-2是备份网关

![02_reliability](http://images.zsjshao.cn/images/rs/24-reliability/02_reliability.png)

MSTP规划:

- 接入层和汇聚层交换机域名、修订版本号和vlan、instance映射关系必须一致才是同一个域。一般只需要保证vlan、instance映射一致即可，域名和修订版本号采用默认值即可
- 通过修改网桥优先级把汇聚交换机设备设置为根网桥，和VRRP 协议一起使用时，同一个VLAN的主根、主网关必须一致
- 连接用户的端口配置portfast功能和BPDUGuard功能，防止端口UP/Down引起不必要的拓扑震荡，防止潜在的环路

VRRP规划

- 在汇聚层交换机的SVI接口下运行VRRP协议，5750-1是奇数Vlan的master，5750-2是偶数vlan的master
- 一般不修改通告间隔，如果修改了通告间隔，同一个VRRP组的通告间隔必须相同
- 如果因环境原因可能产生收帧延迟，导致VRRP震荡，或者VRRP 组比较多，例如双核心应用环境中有30 个左右的VRRP 组，且都把同一台设备设置为Master。为了避免同一个时刻大量收发VRRP 报文对CPU的冲击，建议修改不同VRRP 组的通告发送间隔，比如50％VRRP 组的通告发送间隔设置成1 秒，50％设置成2 秒
- 建议开启监控主设备上行链路的接口功能
- 汇聚交换机互联端口尽量配置为聚合端口











